!function(e){function t(r){if(n[r])return n[r].exports;var a=n[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});n(1)},function(e,t,n){"use strict";var r=n(2),a=n(6),o=(n.n(a),lodash),i=o.filter,l=o.every,s=o.map,c=(o.some,wp.i18n.__),u=wp.blocks,p=u.createBlock,m=u.registerBlockType,d=wp.editor,f=d.RichText,g=d.mediaUpload,b=wp.blob.createBlobURL,h=wp.components,y=(h.G,h.Path,h.SVG,{images:{type:"array",default:[],source:"query",selector:"ul.wp-block-resource-blocks-hero-carousel .blocks-gallery-item",query:{url:{source:"attribute",selector:"img",attribute:"src"},link:{source:"attribute",selector:"img",attribute:"data-link"},alt:{source:"attribute",selector:"img",attribute:"alt",default:""},id:{source:"attribute",selector:"img",attribute:"data-id"},caption:{type:"string",source:"html",selector:"figcaption"}}},ids:{type:"array",default:[]},imageCrop:{type:"boolean",default:!0},autoplay:{type:"boolean",default:!0},arrows:{type:"boolean",default:!1},speed:{type:"string",default:"300"},effect:{type:"string",default:"fade"}}),w=function(e){return e?e.split(",").map(function(e){return parseInt(e,10)}):[]};m("resource-blocks/hero-carousel",{title:c("Hero Carousel","hero-carousel"),description:c("A block to display a full-width hero using image backgrounds.","slick-carousel--hero"),icon:wp.element.createElement("svg",{viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},wp.element.createElement("path",{d:"m20 17.13h-20v-14.26h20zm-18.32-1.68h16.63v-10.9h-16.63z"}),wp.element.createElement("path",{d:"m5.87 12.62-2.01-2.63 2.01-2.57 1.33 1.03-1.21 1.56 1.22 1.6z"}),wp.element.createElement("path",{d:"m14.34 12.62-1.34-1.01 1.22-1.6-1.22-1.56 1.33-1.03 2.01 2.57z"})),category:"resource-blocks",keywords:[c("images"),c("photos")],attributes:y,transforms:{from:[{type:"block",isMultiBlock:!0,blocks:["core/image"],transform:function(e){var t=i(e,function(e){var t=e.id,n=e.url;return t&&n});return t.length>0?p("resource-blocks/hero-carousel",{images:t.map(function(e){return{id:e.id,url:e.url,alt:e.alt,caption:e.caption}}),ids:t.map(function(e){return e.id})}):p("resource-blocks/hero-carousel")}},{type:"shortcode",tag:"gallery",attributes:{images:{type:"array",shortcode:function(e){var t=e.named.ids;return w(t).map(function(e){return{id:e}})}},ids:{type:"array",shortcode:function(e){var t=e.named.ids;return w(t)}}}},{type:"files",isMatch:function(e){return 1!==e.length&&l(e,function(e){return 0===e.type.indexOf("image/")})},transform:function(e,t){var n=p("resource-blocks/hero-carousel",{images:e.map(function(e){return Object(r.b)({url:b(e)})})});return g({filesList:e,onFileChange:function(e){var a=e.map(r.b);t(n.clientId,{ids:s(a,"id"),images:a})},allowedTypes:["image"]}),n}}],to:[{type:"block",blocks:["core/image"],transform:function(e){var t=e.images;return t.length>0?t.map(function(e){var t=e.id,n=e.url,r=e.alt,a=e.caption;return p("core/image",{id:t,url:n,alt:r,caption:a})}):p("core/image")}}]},edit:r.a,save:function(e){var t=e.attributes,n=t.images,r=t.imageCrop,a=t.autoplay,o=t.arrows,i=t.speed,l=t.effect;return wp.element.createElement("ul",{className:r?"is-cropped":"","data-autoplay":a,"data-speed":i,"data-effect":l,"data-arrows":o},n.map(function(e){var t=wp.element.createElement("img",{src:e.url,alt:e.alt,"data-id":e.id,"data-link":e.link,className:e.id?"wp-image-"+e.id:null});return wp.element.createElement("li",{key:e.id||e.url,className:"blocks-carousel-slide"},t,e.caption&&e.caption.length>0&&wp.element.createElement(f.Content,{tagName:"figcaption",value:e.caption}))}))}})},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"b",function(){return z});var l=n(3),s=n(5),c=(n.n(s),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),u=lodash,p=u.filter,m=u.pick,d=u.get,f=wp.element,g=f.Component,b=f.Fragment,h=wp.i18n,y=h.__,w=h.sprintf,v=wp.components,k=v.IconButton,S=v.DropZone,E=v.FormFileUpload,C=v.PanelBody,I=(v.RangeControl,v.TextControl),A=v.SelectControl,_=v.ToggleControl,O=v.Toolbar,x=v.withNotices,F=wp.editor,T=F.BlockControls,j=F.MediaUpload,N=F.MediaPlaceholder,P=F.InspectorControls,R=F.mediaUpload,D=[{value:"fade",label:y("Fade","hero-carousel")},{value:"scroll",label:y("Slide","hero-carousel")}],B=["image"],z=function(e){var t=m(e,["alt","id","link","caption"]);return t.url=d(e,["sizes","large","url"])||d(e,["media_details","sizes","large","source_url"])||e.url,t},U=function(e){function t(){a(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.getAvailableSizes=e.getAvailableSizes.bind(e),e.onSelectImage=e.onSelectImage.bind(e),e.onSelectImages=e.onSelectImages.bind(e),e.setSpeed=e.setSpeed.bind(e),e.setEffect=e.setEffect.bind(e),e.toggleAutoplay=e.toggleAutoplay.bind(e),e.toggleArrows=e.toggleArrows.bind(e),e.toggleImageCrop=e.toggleImageCrop.bind(e),e.onRemoveImage=e.onRemoveImage.bind(e),e.setImageAttributes=e.setImageAttributes.bind(e),e.addFiles=e.addFiles.bind(e),e.uploadFromFiles=e.uploadFromFiles.bind(e),e.setAttributes=e.setAttributes.bind(e),e.state={selectedImage:null},e}return i(t,e),c(t,[{key:"getAvailableSizes",value:function(){return d(this.props.image,["media_details","sizes"],{})}},{key:"setAttributes",value:function(e){if(e.ids)throw new Error('The "ids" attribute should not be changed directly. It is managed automatically when "images" attribute changes');e.images&&(e=Object.assign({},e,{ids:map(e.images,"id")})),this.props.setAttributes(e)}},{key:"onSelectImage",value:function(e){var t=this;return function(){t.state.selectedImage!==e&&t.setState({selectedImage:e})}}},{key:"onRemoveImage",value:function(e){var t=this;return function(){var n=p(t.props.attributes.images,function(t,n){return e!==n});t.setState({selectedImage:null}),t.setAttributes({images:n})}}},{key:"onSelectImages",value:function(e){console.log(JSON.stringify(e)),this.props.setAttributes({images:e.map(function(e){return z(e)})})}},{key:"setSpeed",value:function(e){this.setAttributes({speed:e})}},{key:"setEffect",value:function(e){this.setAttributes({effect:e})}},{key:"toggleAutoplay",value:function(){this.setAttributes({autoplay:!this.props.attributes.autoplay})}},{key:"toggleArrows",value:function(){this.setAttributes({arrows:!this.props.attributes.arrows})}},{key:"toggleImageCrop",value:function(){this.setAttributes({imageCrop:!this.props.attributes.imageCrop})}},{key:"getImageCropHelp",value:function(e){return y(e?"Thumbnails are cropped to align.":"Thumbnails are not cropped.")}},{key:"setImageAttributes",value:function(e,t){var n=this.props.attributes.images,a=this.setAttributes;n[e]&&a({images:[].concat(r(n.slice(0,e)),[Object.assign({},n[e],t)],r(n.slice(e+1)))})}},{key:"uploadFromFiles",value:function(e){this.addFiles(e.target.files)}},{key:"addFiles",value:function(e){var t=this.props.attributes.images||[],n=this.props.noticeOperations,r=this.setAttributes;R({allowedTypes:B,filesList:e,onFileChange:function(e){var n=e.map(function(e){return z(e)});r({images:t.concat(n)})},onError:n.createErrorNotice})}},{key:"componentDidUpdate",value:function(e){!this.props.isSelected&&e.isSelected&&this.setState({selectedImage:null,captionSelected:!1})}},{key:"render",value:function(){var e=this,t=this.props,n=t.attributes,r=t.isSelected,a=t.className,o=t.noticeOperations,i=t.noticeUI,s=n.images,c=n.imageCrop,u=n.autoplay,p=n.arrows,m=n.speed,d=n.effect,f=wp.element.createElement(S,{onFilesDrop:this.addFiles}),g=wp.element.createElement(T,null,!!s.length&&wp.element.createElement(O,null,wp.element.createElement(j,{onSelect:this.onSelectImages,allowedTypes:B,multiple:!0,gallery:!0,value:s.map(function(e){return e.id}),render:function(e){var t=e.open;return wp.element.createElement(k,{className:"components-toolbar__control",label:y("Edit Slider","hero-carousel"),icon:"edit",onClick:t})}})));return 0===s.length?wp.element.createElement(b,null,g,wp.element.createElement(N,{icon:"format-gallery",className:a,labels:{title:y("Slider","hero-carousel"),instructions:y("Drag images, upload new ones or select files from your library.","hero-carousel")},onSelect:this.onSelectImages,accept:"image/*",allowedTypes:B,multiple:!0,notices:i,onError:o.createErrorNotice})):wp.element.createElement(b,null,g,wp.element.createElement(P,null,wp.element.createElement(C,{title:y("Carousel Settings")},wp.element.createElement(_,{label:y("Crop Images"),checked:!!c,onChange:this.toggleImageCrop,help:this.getImageCropHelp}),wp.element.createElement(_,{label:y("Autoplay"),checked:!!u,onChange:this.toggleAutoplay}),wp.element.createElement(_,{label:y("Prev / Next Arrows"),checked:!!p,onChange:this.toggleArrows}),wp.element.createElement(I,{label:y("Transition Speed"),type:"number",min:"100",max:"500",value:m,onChange:this.setSpeed}),wp.element.createElement(A,{label:y("Transition Effect"),value:d,onChange:this.setEffect,options:D}))),i,wp.element.createElement("ul",{className:a+" "+(c?"is-cropped":"")},f,s.map(function(t,n){var a=y(w("image %1$d of %2$d in slider",n+1,s.length));return wp.element.createElement("li",{className:"blocks-gallery-item",key:t.id||t.url},wp.element.createElement(l.a,{url:t.url,alt:t.alt,id:t.id,isSelected:r&&e.state.selectedImage===n,onRemove:e.onRemoveImage(n),onSelect:e.onSelectImage(n),setAttributes:function(t){return e.setImageAttributes(n,t)},caption:t.caption,"aria-label":a}))}),r&&wp.element.createElement("li",{className:"blocks-gallery-item has-add-item-button"},wp.element.createElement(E,{multiple:!0,isLarge:!0,className:"block-library-gallery-add-item-button",onChange:this.uploadFromFiles,accept:"image/*",icon:"insert"},y("Upload an image")))))}}]),t}(g);t.a=x(U)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(4),l=n.n(i),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=wp.element,u=c.Component,p=c.Fragment,m=wp.components,d=m.IconButton,f=m.Spinner,g=wp.i18n.__,b=wp.keycodes,h=b.BACKSPACE,y=b.DELETE,w=wp.data.withSelect,v=wp.editor.RichText,k=wp.blob.isBlobURL,S=function(e){function t(){r(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.onImageClick=e.onImageClick.bind(e),e.onSelectCaption=e.onSelectCaption.bind(e),e.onKeyDown=e.onKeyDown.bind(e),e.bindContainer=e.bindContainer.bind(e),e.state={captionSelected:!1},e}return o(t,e),s(t,[{key:"bindContainer",value:function(e){this.container=e}},{key:"onSelectCaption",value:function(){this.state.captionSelected||this.setState({captionSelected:!0}),this.props.isSelected||this.props.onSelect()}},{key:"onImageClick",value:function(){this.props.isSelected||this.props.onSelect(),this.state.captionSelected&&this.setState({captionSelected:!1})}},{key:"onKeyDown",value:function(e){this.container===document.activeElement&&this.props.isSelected&&-1!==[h,y].indexOf(e.keyCode)&&(e.stopPropagation(),e.preventDefault(),this.props.onRemove())}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.isSelected,r=t.image,a=t.url;r&&!a&&this.props.setAttributes({url:r.source_url,alt:r.alt_text}),this.state.captionSelected&&!n&&e.isSelected&&this.setState({captionSelected:!1})}},{key:"render",value:function(){var e=this.props,t=e.url,n=e.alt,r=e.id,a=(e.link,e.isSelected),o=e.caption,i=e.onRemove,s=e.setAttributes,c=e["aria-label"],u=wp.element.createElement(p,null,wp.element.createElement("img",{src:t,alt:n,"data-id":r,onClick:this.onImageClick,tabIndex:"0",onKeyDown:this.onImageClick,"aria-label":c}),k(t)&&wp.element.createElement(f,null)),m=l()({"is-selected":a,"is-transient":k(t)});return wp.element.createElement("figure",{className:m,tabIndex:"-1",onKeyDown:this.onKeyDown,ref:this.bindContainer},a&&wp.element.createElement("div",{className:"block-library-gallery-item__inline-menu"},wp.element.createElement(d,{icon:"no-alt",onClick:i,className:"blocks-gallery-item__remove",label:g("Remove Image")})),u,!v.isEmpty(o)||a?wp.element.createElement(v,{tagName:"figcaption",placeholder:g("Write caption\u2026"),value:o,isSelected:this.state.captionSelected,onChange:function(e){return s({caption:e})},unstableOnFocus:this.onSelectCaption,inlineToolbar:!0}):null)}}]),t}(u);t.a=w(function(e,t){var n=e("core"),r=n.getMedia,a=t.id;return{image:a?r(a):null}})(S)},function(e,t,n){var r,a;!function(){"use strict";function n(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var a=typeof r;if("string"===a||"number"===a)e.push(r);else if(Array.isArray(r)&&r.length){var i=n.apply(null,r);i&&e.push(i)}else if("object"===a)for(var l in r)o.call(r,l)&&r[l]&&e.push(l)}}return e.join(" ")}var o={}.hasOwnProperty;"undefined"!==typeof e&&e.exports?(n.default=n,e.exports=n):(r=[],void 0!==(a=function(){return n}.apply(t,r))&&(e.exports=a))}()},function(e,t){},function(e,t){}]);